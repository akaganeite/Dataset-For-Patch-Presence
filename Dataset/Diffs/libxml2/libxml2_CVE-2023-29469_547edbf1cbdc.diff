diff --git a/dict.c b/dict.c
index 86c3f6d7a3f4453fc93adec65bf82c4e41d24aa8..d7fd1a068a807d067037a64e333aba2989b7d401 100644
--- a/dict.c
+++ b/dict.c
@@ -433,7 +433,8 @@ static unsigned long
 xmlDictComputeFastKey(const xmlChar *name, int namelen, int seed) {
     unsigned long value = seed;
 
-    if (name == NULL) return(0);
+    if ((name == NULL) || (namelen <= 0))
+        return(value);
     value += *name;
     value <<= 5;
     if (namelen > 10) {
